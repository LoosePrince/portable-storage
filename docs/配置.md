# Portable Storage 配置说明

## 服务端配置

服务端配置文件位于：`config/portable-storage-server.toml`

### 配置文件示例

```toml
# Portable Storage 服务端配置文件
# 此配置文件控制服务端行为，修改后需要重启服务器生效

[storage]
# 是否需要条件启用玩家随身仓库
# 启用后玩家的随身仓库不再是默认就有的，而是需要达成条件才会有
# 默认值: true
require_condition_to_enable = true

# 启用玩家随身仓库的道具
# 启用"需要条件启用玩家随身仓库"后用以启用玩家仓库的物品，手持右键以启用
# 默认值: "minecraft:nether_star" (下界之星)
# 格式: "命名空间:物品ID"
enable_item = "minecraft:nether_star"

# 启用玩家随身仓库的道具是否消耗
# 开启后启用玩家随身仓库时会消耗该物品一个
# 默认值: true
consume_enable_item = true

# 是否启用增量同步
# 启用后只同步发生变化的数据，减少网络传输量
# 可能存在BUG未发现或未修复的错误
# 默认值: false
enable_incremental_sync = false

# 启用仓库时是否清空现有数据
# 启用后使用仓库激活物品时会清空玩家现有的仓库数据
# 默认值: true
clear_storage_on_enable = true

[container_display]
# 工作台升级在容器界面显示仓库的配置
# 启用工作台升级后，以下容器界面将显示仓库界面
# 默认值: 全部为 false

# 切石机
stonecutter = false
# 制图台
cartography_table = false
# 锻造台
smithing_table = false
# 砂轮
grindstone = false
# 织布机
loom = false
# 熔炉
furnace = false
# 烟熏炉
smoker = false
# 高炉
blast_furnace = false
# 铁砧
anvil = false
# 附魔台
enchanting_table = false
# 酿造台
brewing_stand = false
# 信标
beacon = false
# 箱子
chest = false
# 木桶
barrel = false
# 末影箱
ender_chest = false
# 潜影盒
shulker_box = false
# 发射器
dispenser = false
# 投掷器
dropper = false
# 合成器
crafter = false
# 漏斗
hopper = false
# 陷阱箱
trapped_chest = false
# 漏斗矿车
hopper_minecart = false
# 运输矿车
chest_minecart = false
# 运输船
chest_boat = false
# 运输竹筏
bamboo_chest_raft = false
```

### 服务端配置项说明

#### [storage] 部分

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `require_condition_to_enable` | boolean | false | 是否需要条件启用玩家随身仓库。启用后玩家需要达成条件才能使用随身仓库 |
| `enable_item` | string | "minecraft:nether_star" | 启用随身仓库的道具，格式为"命名空间:物品ID" |
| `consume_enable_item` | boolean | true | 启用随身仓库时是否消耗启用道具 |
| `enable_incremental_sync` | boolean | false | 是否启用增量同步，减少网络传输量（可能存在BUG） |
| `clear_storage_on_enable` | boolean | true | 启用仓库时是否清空现有数据 |

#### [container_display] 部分

工作台升级功能允许在特定容器界面中显示仓库。以下配置项控制哪些容器界面会显示仓库：

| 配置项 | 对应容器 | 默认值 | 说明 |
|--------|----------|--------|------|
| `stonecutter` | 切石机 | false | 在切石机界面显示仓库 |
| `cartography_table` | 制图台 | false | 在制图台界面显示仓库 |
| `smithing_table` | 锻造台 | false | 在锻造台界面显示仓库 |
| `grindstone` | 砂轮 | false | 在砂轮界面显示仓库 |
| `loom` | 织布机 | false | 在织布机界面显示仓库 |
| `furnace` | 熔炉 | false | 在熔炉界面显示仓库 |
| `smoker` | 烟熏炉 | false | 在烟熏炉界面显示仓库 |
| `blast_furnace` | 高炉 | false | 在高炉界面显示仓库 |
| `anvil` | 铁砧 | false | 在铁砧界面显示仓库 |
| `enchanting_table` | 附魔台 | false | 在附魔台界面显示仓库 |
| `brewing_stand` | 酿造台 | false | 在酿造台界面显示仓库 |
| `beacon` | 信标 | false | 在信标界面显示仓库 |
| `chest` | 箱子 | false | 在箱子界面显示仓库 |
| `barrel` | 木桶 | false | 在木桶界面显示仓库 |
| `ender_chest` | 末影箱 | false | 在末影箱界面显示仓库 |
| `shulker_box` | 潜影盒 | false | 在潜影盒界面显示仓库 |
| `dispenser` | 发射器 | false | 在发射器界面显示仓库 |
| `dropper` | 投掷器 | false | 在投掷器界面显示仓库 |
| `crafter` | 合成器 | false | 在合成器界面显示仓库 |
| `hopper` | 漏斗 | false | 在漏斗界面显示仓库 |
| `trapped_chest` | 陷阱箱 | false | 在陷阱箱界面显示仓库 |
| `hopper_minecart` | 漏斗矿车 | false | 在漏斗矿车界面显示仓库 |
| `chest_minecart` | 运输矿车 | false | 在运输矿车界面显示仓库 |
| `chest_boat` | 运输船 | false | 在运输船界面显示仓库 |
| `bamboo_chest_raft` | 运输竹筏 | false | 在运输竹筏界面显示仓库 |

## 客户端配置

客户端配置文件位于：`config/portable-storage-client.json`

### 配置文件示例

```json
{
  "collapsed": false,
  "sortMode": "COUNT",
  "sortAscending": false,
  "craftRefill": true,
  "autoDeposit": false,
  "smartCollapse": false,
  "searchPos": "BOTTOM",
  "storagePos": "BOTTOM",
  "virtualCraftingVisible": false,
  "maxVisibleRows": 6
}
```

### 客户端配置项说明

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `collapsed` | boolean | false | 仓库界面是否折叠显示 |
| `sortMode` | string | "COUNT" | 物品排序方式，可选值：COUNT（数量）、NAME（名称）、MOD_ID（模组ID）、UPDATE_TIME（更新时间） |
| `sortAscending` | boolean | false | 排序是否升序（false=降序，true=升序） |
| `craftRefill` | boolean | true | 是否启用合成补充功能 |
| `autoDeposit` | boolean | false | 是否启用自动传入功能 |
| `smartCollapse` | boolean | false | 是否启用智能折叠（按物品ID折叠不同NBT但同ID的物品） |
| `searchPos` | string | "BOTTOM" | 搜索框位置，可选值：BOTTOM（仓库UI下面）、TOP（玩家背包上方）、TOP2（玩家背包上方更靠上）、MIDDLE（背包与仓库之间） |
| `storagePos` | string | "BOTTOM" | 仓库位置，可选值：BOTTOM（底部）、TOP（顶部） |
| `virtualCraftingVisible` | boolean | false | 虚拟合成界面是否可见 |
| `maxVisibleRows` | integer | 6 | 最大可见行数 |

### 排序模式说明

- **COUNT**: 按物品数量排序
- **NAME**: 按物品名称排序
- **MOD_ID**: 按模组ID排序
- **UPDATE_TIME**: 按更新时间排序

### 搜索位置说明

- **BOTTOM**: 搜索框位于仓库UI下方
- **TOP**: 搜索框位于玩家背包上方（靠近）
- **TOP2**: 搜索框位于玩家背包上方（更靠上）
- **MIDDLE**: 搜索框插入在背包与仓库之间

### 仓库位置说明

- **BOTTOM**: 仓库界面位于底部（默认）
- **TOP**: 仓库界面位于顶部
